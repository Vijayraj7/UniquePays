<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Face Detection (Skin Color Detection)</title>
    <style>
        canvas {
            display: block;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <h2>Upload Image to Detect Skin Tone (Approximate Face Detection)</h2>
    <input type="file" id="imageUpload" accept="image/*" />
    <canvas id="canvas"></canvas>

    <script>
        const imageUpload = document.getElementById('imageUpload');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        imageUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const img = new Image();
                img.src = URL.createObjectURL(file);

                img.onload = function () {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0, img.width, img.height);

                    detectSkinTone();
                };
            }
        });

        function detectSkinTone() {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            const skinRegions = [];

            // Loop through all the pixels
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];

                // Basic skin color detection (between certain RGB ranges)
                if (isSkinColor(r, g, b)) {
                    const x = (i / 4) % canvas.width;
                    const y = Math.floor((i / 4) / canvas.width);
                    skinRegions.push({ x, y });
                }
            }

            if (skinRegions.length > 0) {
                // Get bounding box for skin tone areas
                const xMin = Math.min(...skinRegions.map(p => p.x));
                const xMax = Math.max(...skinRegions.map(p => p.x));
                const yMin = Math.min(...skinRegions.map(p => p.y));
                const yMax = Math.max(...skinRegions.map(p => p.y));

                // Clear the canvas and only show the skin-tone-detected region
                const width = xMax - xMin;
                const height = yMax - yMin;

                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(canvas, xMin, yMin, width, height, xMin, yMin, width, height);
            } else {
                alert('No skin tone detected');
            }
        }

        function isSkinColor(r, g, b) {
            // Approximate skin tone color range (this is a very basic range and might not work in many cases)
            return (
                r > 95 && g > 40 && g < 100 && b > 20 && Math.abs(r - g) > 15 && r > g && r > b
            );
        }
    </script>
</body>
</html>
